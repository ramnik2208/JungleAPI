{"version":3,"sources":["../../src/utils/utils.js"],"names":[],"mappings":"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","file":"utils.js","sourcesContent":["require(\"babel-polyfill\");\r\nvar _ = require('underscore')._;\r\nvar async = require(\"async\");\r\nvar scan = require(\"./scan\");\r\nvar fs = require(\"fs\");\r\nvar path = require('path');\r\nvar parsersHelper = require(\"./parsersHelper\");\r\n\r\n\r\nvar utils = module.exports = {\r\n        counter: {},\r\n        start: 0,\r\n        getCount: function (counterName) {\r\n                if (_.isUndefined(parsersHelper.counter[counterName])) {\r\n                        parsersHelper.counter[counterName] = 1;\r\n                }\r\n                else {\r\n                        parsersHelper.counter[counterName]++;\r\n                }\r\n                return counterName + \">\" + parsersHelper.counter[counterName];\r\n        },\r\n        startTimer: function () {\r\n                utils.start = new Date().getTime();\r\n        },\r\n        stopTimer: function () {\r\n                var end = new Date().getTime();\r\n                var time = end - utils.start;\r\n                console.log('Execution time: ' + time / 1000);\r\n        },\r\n        read: function (path) {\r\n                return new Promise(\r\n                        function (resolve, reject) {\r\n                                fs.readFile(path, \"utf-8\", function (error, data) {\r\n                                        resolve([path, data]);\r\n                                })\r\n                        });\r\n        },\r\n        writefile: function (file) {\r\n\r\n                return function (buffer) {\r\n                        return new Promise(function (resolve, reject) {\r\n                                fs.writeFile(file, buffer, function (err) {\r\n                                        if (err) reject(err)\r\n                                        else resolve()\r\n                                })\r\n                        })\r\n                }\r\n        },\r\n        read_node: function (node) {\r\n                return new Promise(\r\n                        function (resolve, reject) {\r\n                                fs.readFile(node.name, \"utf-8\", function (error, data) {\r\n                                        resolve([node, data]);\r\n                                })\r\n                        });\r\n        },\r\n        correctPathSync: function (filePath, parent, extension) {\r\n                let folder = parent.match(/(.*)[\\/\\\\]/)[1] || '';\r\n                var mixedPath = path.normalize(folder + \"/\" + filePath);\r\n                mixedPath = mixedPath.replace(/\\\\/g, \"\\/\").replace(\"//\", \"/\");\r\n                if (extension && mixedPath.substr(mixedPath.length - extension.length) !== extension) {\r\n                        mixedPath = mixedPath + extension;\r\n                }\r\n                return mixedPath;\r\n\r\n        },\r\n        normalize: function (filePath, folder) {\r\n                if (folder === undefined) {\r\n                        folder = \"\";\r\n                }\r\n                else{\r\n                       folder =  folder + \"/\"\r\n                }\r\n                var mixedPath = path.normalize(folder + filePath);\r\n                mixedPath = mixedPath.replace(/\\\\/g, \"\\/\").replace(\"//\", \"/\");\r\n                return mixedPath;\r\n\r\n        },\r\n        append: function (file, text) {\r\n                fs.appendFileSync(file, text + \"\\n\");\r\n        },\r\n        scanFiles: function (website_folder, filter) {\r\n                return new Promise(function (resolve, reject) {\r\n                        scan(website_folder, filter, false, function (err, fileList) {\r\n                                if (err) {\r\n                                        reject(err);\r\n                                }\r\n                                else {\r\n                                        resolve(fileList);\r\n                                }\r\n                        });\r\n                });\r\n        },\r\n        escapeHTML: function (text) {\r\n                var chr = {\r\n                        '\"': \"\",\r\n                        \"&\": \"\",\r\n                        \"<\": \"\",\r\n                        \">\": \"\",\r\n                        \"@\": \"\"\r\n                };\r\n\r\n                function abc(a) {\r\n                        return chr[a]\r\n                }\r\n                return text.replace(/[\\\"&<>]/g, abc)\r\n        }\r\n};\r\n\r\n"]}