{"version":3,"sources":["../../src/lib/database.js"],"names":[],"mappings":"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","file":"database.js","sourcesContent":["var _ = require('underscore')._;\r\nvar parsersHelper = require(\"../utils/parsersHelper\");\r\n\r\nvar db = module.exports = {\r\n        classes: [],\r\n        relations: [],\r\n        count: 0,\r\n        addProperty: function (classId, property) {\r\n                property.name = parsersHelper.removeSpecialChar(property.name);\r\n                property.name = parsersHelper.reduceLength(property.name, 30)\r\n                if (classId !== undefined && property.name !== undefined && property.name !== \"\") {\r\n                        property.value = parsersHelper.removeSpecialChar(parsersHelper.reduceLength(property.value, 30));\r\n                        let prop = property.visibility + property.name;\r\n                        if (property.type !== null && property.type !== \"\" && property.type !== \"undefined\") {\r\n                                prop += \" : \" + property.type;\r\n                        }\r\n                        if (property.value !== null && property.value !== \"\" && property.value !== undefined && property.value !== \"null\") {\r\n                                prop += \" = \" + property.value;\r\n                        }\r\n                        db.classes[classId].properties.push(prop);\r\n                }\r\n        },\r\n        addMethod: function (classId, method) {\r\n                if (classId !== undefined) {\r\n                        method.name = parsersHelper.removeSpecialChar(parsersHelper.reduceLength(method.name, 30));\r\n                        method.value = parsersHelper.removeSpecialChar(parsersHelper.reduceLength(method.value, 30));\r\n                        db.classes[classId].methods.push(method.visibility + method.name + \"(\" + method.value + \")\");\r\n                }\r\n        },\r\n        addClass: function (myClass) {\r\n                myClass.key = db.count;\r\n                if (myClass.fill === null || myClass.fill === undefined) {\r\n                        myClass.fill = \"lightyellow\";\r\n                }\r\n                myClass.properties = [];\r\n                myClass.methods = [];\r\n                db.count++;\r\n                db.classes.push(myClass);\r\n                return db.count - 1;\r\n        },\r\n        setClass: function (key, newClass) {\r\n                db.classes[key] = _.extend(db.classes[key], newClass);\r\n        },\r\n        addRelations: function (rel) {\r\n                db.relations.push(rel);\r\n        },\r\n        getClass: function (classId) {\r\n                return db.classes[classId];\r\n        },\r\n        getClasses: function () {\r\n                return db.classes;\r\n        },\r\n        getRelations() {\r\n                return db.relations;\r\n        },\r\n\r\n        setIdentifiedFiles: function (identifiedFiles) {\r\n                db.identifiedFiles = identifiedFiles;\r\n        },\r\n        getIdentifiedFiles: function () {\r\n                return db.identifiedFiles;\r\n        }\r\n}"]}